var __webpack_modules__ = {
  "./src/wasteland-echoes-card/脚本/条件分歧判定/index.ts"() {
    eval("{\n/**\n * 条件分歧判定脚本\n *\n * 检测MVU变量中的极端危险状态：\n * 1. 标记 _已触发结局 = true（AI不再继续故事）\n * 2. 注入提示词引导AI自由创作BE，用 [收集:结局:标题｜描述] 格式输出\n * 3. 脚本解析 [收集:] 指令后存入角色卡变量 收集.结局\n */\nconst DANGER_CONDITIONS = [\n    {\n        id: 'fatal_temperature_low',\n        label: '致命低温',\n        check: u => typeof u.体温 === 'number' && u.体温 < 32,\n    },\n    {\n        id: 'fatal_temperature_high',\n        label: '致命高温',\n        check: u => typeof u.体温 === 'number' && u.体温 > 41,\n    },\n    {\n        id: 'fatal_exhaustion',\n        label: '体力衰竭',\n        check: u => typeof u.体力 === 'number' &&\n            u.体力 > 0 &&\n            u.体力 <= 1 &&\n            u.创伤 &&\n            (u.创伤.includes('重伤') || u.创伤.includes('严重')),\n    },\n    {\n        id: 'fatal_infection',\n        label: '严重感染',\n        check: u => u.创伤 && (u.创伤.includes('严重感染') || u.创伤.includes('败血症')),\n    },\n    {\n        id: 'fatal_injury',\n        label: '致命外伤',\n        check: u => u.创伤 && (u.创伤.includes('大出血') || u.创伤.includes('致命伤')),\n    },\n];\n// ============ 提示词构建 ============\nfunction buildEndingPrompt(label, userData) {\n    return `[系统：结局条件已触发 — ${label}]\n\n当前状态：体温${userData.体温}℃ / 体力${userData.体力} / 创伤：${userData.创伤} / 抗体：${userData.抗体}\n\n这是 Bad Ending，游戏结束，不应给玩家转机或继续发展。\n请根据当前状态和剧情自由创作结局，内容和标题完全由你决定。\n禁止输出 [option:]，结局楼层不允许有任何选项。\n在结尾用以下格式输出（界面会解析并显示解锁动画）：\n[收集:结局:你创作的标题｜一句话描述]`;\n}\nfunction parseCollectionTag(text) {\n    // 匹配 [收集:结局:标题｜描述] 或 [收集:结局:标题|描述] 或 [收集:结局:标题]\n    const match = text.match(/\\[收集:结局[：:]([^\\]]+)\\]/);\n    if (!match)\n        return null;\n    const rest = match[1].trim();\n    const sepIdx = rest.search(/[｜|]/);\n    const title = sepIdx >= 0 ? rest.slice(0, sepIdx).trim() : rest;\n    const desc = sepIdx >= 0 ? rest.slice(sepIdx + 1).trim() : '';\n    return { 标题: title, 描述: desc };\n}\nasync function saveEndingToCollection(item) {\n    try {\n        const charVars = getVariables({ type: 'character' });\n        const collection = charVars.收集 || {};\n        const endings = collection.结局 || [];\n        if (!endings.some(e => e.标题 === item.标题)) {\n            endings.push(item);\n        }\n        await replaceVariables({ ...charVars, 收集: { ...collection, 结局: endings } }, { type: 'character' });\n        console.info(`[条件分歧] 结局已收集: ${item.标题}`);\n    }\n    catch (e) {\n        console.error('[条件分歧] 保存结局收集失败:', e);\n    }\n}\n// ============ 核心逻辑 ============\nlet endingInjection = null;\nlet endingTriggered = false;\nfunction checkDangerConditions(userData) {\n    for (const cond of DANGER_CONDITIONS) {\n        try {\n            if (cond.check(userData))\n                return cond;\n        }\n        catch {\n            // skip\n        }\n    }\n    return null;\n}\nasync function init() {\n    await waitGlobalInitialized('Mvu');\n    console.info('[条件分歧] 系统初始化');\n    // 监听MVU变量更新\n    eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, variables => {\n        const statData = _.get(variables, 'stat_data');\n        if (!statData)\n            return;\n        for (const key of Object.keys(statData)) {\n            const userData = statData[key];\n            if (!userData || typeof userData !== 'object')\n                continue;\n            if (userData._已触发结局 || endingTriggered)\n                continue;\n            const triggered = checkDangerConditions(userData);\n            if (!triggered)\n                continue;\n            console.info(`[条件分歧] 触发: ${triggered.label}`);\n            endingTriggered = true;\n            _.set(variables, `stat_data.${key}._已触发结局`, true);\n            if (endingInjection)\n                endingInjection.uninject();\n            endingInjection = injectPrompts([\n                {\n                    id: 'ending_trigger',\n                    position: 'in_chat',\n                    depth: 1,\n                    role: 'system',\n                    content: buildEndingPrompt(triggered.label, userData),\n                },\n            ]);\n            toastr.error(`${triggered.label} — Bad Ending`, '⚠️ 结局触发', { timeOut: 8000, closeButton: true });\n            break;\n        }\n    });\n    // 监听消息完成，解析 [收集:结局:] 并存入角色卡变量\n    eventOn(tavern_events.MESSAGE_RECEIVED, async () => {\n        if (!endingTriggered)\n            return;\n        const messages = getChatMessages(-1);\n        if (!messages || messages.length === 0)\n            return;\n        const lastMsg = messages[0];\n        const content = lastMsg.message || '';\n        const item = parseCollectionTag(content);\n        if (item) {\n            await saveEndingToCollection(item);\n            if (endingInjection) {\n                endingInjection.uninject();\n                endingInjection = null;\n            }\n        }\n    });\n    console.info('[条件分歧] 事件监听已设置');\n}\n// ============ 启动与清理 ============\n$(() => {\n    errorCatched(init)();\n});\n$(window).on('pagehide', () => {\n    if (endingInjection) {\n        endingInjection.uninject();\n        endingInjection = null;\n    }\n    console.info('[条件分歧] 脚本卸载');\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2FzdGVsYW5kLWVjaG9lcy1jYXJkL+iEmuacrC/mnaHku7bliIbmrafliKTlrpovaW5kZXgudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7QUFVSCxNQUFNLGlCQUFpQixHQUFzQjtJQUMzQztRQUNFLEVBQUUsRUFBRSx1QkFBdUI7UUFDM0IsS0FBSyxFQUFFLE1BQU07UUFDYixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssUUFBUSxJQUFJLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRTtLQUNsRDtJQUNEO1FBQ0UsRUFBRSxFQUFFLHdCQUF3QjtRQUM1QixLQUFLLEVBQUUsTUFBTTtRQUNiLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSyxRQUFRLElBQUksQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFO0tBQ2xEO0lBQ0Q7UUFDRSxFQUFFLEVBQUUsa0JBQWtCO1FBQ3RCLEtBQUssRUFBRSxNQUFNO1FBQ2IsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQ1QsT0FBTyxDQUFDLENBQUMsRUFBRSxLQUFLLFFBQVE7WUFDeEIsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDO1lBQ1IsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDO1lBQ1QsQ0FBQyxDQUFDLEVBQUU7WUFDSixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQy9DO0lBQ0Q7UUFDRSxFQUFFLEVBQUUsaUJBQWlCO1FBQ3JCLEtBQUssRUFBRSxNQUFNO1FBQ2IsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxF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ZUFBZSxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUMzQixlQUFlLEdBQUcsSUFBSSxDQUFDO1lBQ3pCLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDakMsQ0FBQztBQUVELGtDQUFrQztBQUVsQyxDQUFDLENBQUMsR0FBRyxFQUFFO0lBQ0wsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFFSCxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxlQUFlLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDM0IsZUFBZSxHQUFHLElBQUksQ0FBQztJQUN6QixDQUFDO0lBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUM5QixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvd2FzdGVsYW5kLWVjaG9lcy1jYXJkL+iEmuacrC/mnaHku7bliIbmrafliKTlrpovaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDmnaHku7bliIbmrafliKTlrprohJrmnKxcbiAqXG4gKiDmo4DmtYtNVlXlj5jph4/kuK3nmoTmnoHnq6/ljbHpmannirbmgIHvvJpcbiAqIDEuIOagh+iusCBf5bey6Kem5Y+R57uT5bGAID0gdHJ1Ze+8iEFJ5LiN5YaN57un57ut5pWF5LqL77yJXG4gKiAyLiDms6jlhaXmj5DnpLror43lvJXlr7xBSeiHqueUseWIm+S9nEJF77yM55SoIFvmlLbpm4Y657uT5bGAOuagh+mimO+9nOaPj+i/sF0g5qC85byP6L6T5Ye6XG4gKiAzLiDohJrmnKzop6PmnpAgW+aUtumbhjpdIOaMh+S7pOWQjuWtmOWFpeinkuiJsuWNoeWPmOmHjyDmlLbpm4Yu57uT5bGAXG4gKi9cblxuLy8gPT09PT09PT09PT09IOWNsemZqeadoeS7tiA9PT09PT09PT09PT1cblxuaW50ZXJmYWNlIERhbmdlckNvbmRpdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGNoZWNrOiAodTogYW55KSA9PiBib29sZWFuO1xufVxuXG5jb25zdCBEQU5HRVJfQ09ORElUSU9OUzogRGFuZ2VyQ29uZGl0aW9uW10gPSBbXG4gIHtcbiAgICBpZDogJ2ZhdGFsX3RlbXBlcmF0dXJlX2xvdycsXG4gICAgbGFiZWw6ICfoh7Tlkb3kvY7muKknLFxuICAgIGNoZWNrOiB1ID0+IHR5cGVvZiB1LuS9k+a4qSA9PT0gJ251bWJlcicgJiYgdS7kvZPmuKkgPCAzMixcbiAgfSxcbiAge1xuICAgIGlkOiAnZmF0YWxfdGVtcGVyYXR1cmVfaGlnaCcsXG4gICAgbGFiZWw6ICfoh7Tlkb3pq5jmuKknLFxuICAgIGNoZWNrOiB1ID0+IHR5cGVvZiB1LuS9k+a4qSA9PT0gJ251bWJlcicgJiYgdS7kvZPmuKkgPiA0MSxcbiAgfSxcbiAge1xuICAgIGlkOiAnZmF0YWxfZXhoYXVzdGlvbicsXG4gICAgbGFiZWw6ICfkvZPlipvoobDnq60nLFxuICAgIGNoZWNrOiB1ID0+XG4gICAgICB0eXBlb2YgdS7kvZPlipsgPT09ICdudW1iZXInICYmXG4gICAgICB1LuS9k+WKmyA+IDAgJiZcbiAgICAgIHUu5L2T5YqbIDw9IDEgJiZcbiAgICAgIHUu5Yib5LykICYmXG4gICAgICAodS7liJvkvKQuaW5jbHVkZXMoJ+mHjeS8pCcpIHx8IHUu5Yib5LykLmluY2x1ZGVzKCfkuKXph40nKSksXG4gIH0sXG4gIHtcbiAgICBpZDogJ2ZhdGFsX2luZmVjdGlvbicsXG4gICAgbGFiZWw6ICfkuKXph43mhJ/mn5MnLFxuICAgIGNoZWNrOiB1ID0+IHUu5Yib5LykICYmICh1LuWIm+S8pC5pbmNsdWRlcygn5Lil6YeN5oSf5p+TJykgfHwgdS7liJvkvKQuaW5jbHVkZXMoJ+i0peihgOeXhycpKSxcbiAgfSxcbiAge1xuICAgIGlkOiAnZmF0YWxfaW5qdXJ5JyxcbiAgICBsYWJlbDogJ+iHtOWRveWkluS8pCcsXG4gICAgY2hlY2s6IHUgPT4gdS7liJvkvKQgJiYgKHUu5Yib5LykLmluY2x1ZGVzKCflpKflh7rooYAnKSB8fCB1LuWIm+S8pC5pbmNsdWRlcygn6Ie05ZG95LykJykpLFxuICB9LFxuXTtcblxuLy8gPT09PT09PT09PT09IOaPkOekuuivjeaehOW7uiA9PT09PT09PT09PT1cblxuZnVuY3Rpb24gYnVpbGRFbmRpbmdQcm9tcHQobGFiZWw6IHN0cmluZywgdXNlckRhdGE6IGFueSk6IHN0cmluZyB7XG4gIHJldHVybiBgW+ezu+e7n++8mue7k+WxgOadoeS7tuW3suinpuWPkSDigJQgJHtsYWJlbH1dXG5cbuW9k+WJjeeKtuaAge+8muS9k+a4qSR7dXNlckRhdGEu5L2T5ripfeKEgyAvIOS9k+WKmyR7dXNlckRhdGEu5L2T5YqbfSAvIOWIm+S8pO+8miR7dXNlckRhdGEu5Yib5LykfSAvIOaKl+S9k++8miR7dXNlckRhdGEu5oqX5L2TfVxuXG7ov5nmmK8gQmFkIEVuZGluZ++8jOa4uOaIj+e7k+adn++8jOS4jeW6lOe7meeOqeWutui9rOacuuaIlue7p+e7reWPkeWxleOAglxu6K+35qC55o2u5b2T5YmN54q25oCB5ZKM5Ymn5oOF6Ieq55Sx5Yib5L2c57uT5bGA77yM5YaF5a655ZKM5qCH6aKY5a6M5YWo55Sx5L2g5Yaz5a6a44CCXG7npoHmraLovpPlh7ogW29wdGlvbjpd77yM57uT5bGA5qW85bGC5LiN5YWB6K645pyJ5Lu75L2V6YCJ6aG544CCXG7lnKjnu5PlsL7nlKjku6XkuIvmoLzlvI/ovpPlh7rvvIjnlYzpnaLkvJrop6PmnpDlubbmmL7npLrop6PplIHliqjnlLvvvInvvJpcblvmlLbpm4Y657uT5bGAOuS9oOWIm+S9nOeahOagh+mimO+9nOS4gOWPpeivneaPj+i/sF1gO1xufVxuXG4vLyA9PT09PT09PT09PT0g57uT5bGA5pS26ZuG77yI6KeS6Imy5Y2h5Y+Y6YeP77yJID09PT09PT09PT09PVxuXG5pbnRlcmZhY2UgQ29sbGVjdGlvbkl0ZW0ge1xuICDmoIfpopg6IHN0cmluZztcbiAg5o+P6L+wOiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29sbGVjdGlvblRhZyh0ZXh0OiBzdHJpbmcpOiBDb2xsZWN0aW9uSXRlbSB8IG51bGwge1xuICAvLyDljLnphY0gW+aUtumbhjrnu5PlsYA65qCH6aKY772c5o+P6L+wXSDmiJYgW+aUtumbhjrnu5PlsYA65qCH6aKYfOaPj+i/sF0g5oiWIFvmlLbpm4Y657uT5bGAOuagh+mimF1cbiAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXFvmlLbpm4Y657uT5bGAW++8mjpdKFteXFxdXSspXFxdLyk7XG4gIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuICBjb25zdCByZXN0ID0gbWF0Y2hbMV0udHJpbSgpO1xuICBjb25zdCBzZXBJZHggPSByZXN0LnNlYXJjaCgvW++9nHxdLyk7XG4gIGNvbnN0IHRpdGxlID0gc2VwSWR4ID49IDAgPyByZXN0LnNsaWNlKDAsIHNlcElkeCkudHJpbSgpIDogcmVzdDtcbiAgY29uc3QgZGVzYyA9IHNlcElkeCA+PSAwID8gcmVzdC5zbGljZShzZXBJZHggKyAxKS50cmltKCkgOiAnJztcbiAgcmV0dXJuIHsg5qCH6aKYOiB0aXRsZSwg5o+P6L+wOiBkZXNjIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNhdmVFbmRpbmdUb0NvbGxlY3Rpb24oaXRlbTogQ29sbGVjdGlvbkl0ZW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjaGFyVmFycyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdjaGFyYWN0ZXInIH0pIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGNoYXJWYXJzLuaUtumbhiB8fCB7fTtcbiAgICBjb25zdCBlbmRpbmdzOiBDb2xsZWN0aW9uSXRlbVtdID0gY29sbGVjdGlvbi7nu5PlsYAgfHwgW107XG5cbiAgICBpZiAoIWVuZGluZ3Muc29tZShlID0+IGUu5qCH6aKYID09PSBpdGVtLuagh+mimCkpIHtcbiAgICAgIGVuZGluZ3MucHVzaChpdGVtKTtcbiAgICB9XG5cbiAgICBhd2FpdCByZXBsYWNlVmFyaWFibGVzKHsgLi4uY2hhclZhcnMsIOaUtumbhjogeyAuLi5jb2xsZWN0aW9uLCDnu5PlsYA6IGVuZGluZ3MgfSB9LCB7IHR5cGU6ICdjaGFyYWN0ZXInIH0pO1xuICAgIGNvbnNvbGUuaW5mbyhgW+adoeS7tuWIhuatp10g57uT5bGA5bey5pS26ZuGOiAke2l0ZW0u5qCH6aKYfWApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignW+adoeS7tuWIhuatp10g5L+d5a2Y57uT5bGA5pS26ZuG5aSx6LSlOicsIGUpO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PSDmoLjlv4PpgLvovpEgPT09PT09PT09PT09XG5cbmxldCBlbmRpbmdJbmplY3Rpb246IHsgdW5pbmplY3Q6ICgpID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xubGV0IGVuZGluZ1RyaWdnZXJlZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBjaGVja0RhbmdlckNvbmRpdGlvbnModXNlckRhdGE6IGFueSk6IERhbmdlckNvbmRpdGlvbiB8IG51bGwge1xuICBmb3IgKGNvbnN0IGNvbmQgb2YgREFOR0VSX0NPTkRJVElPTlMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbmQuY2hlY2sodXNlckRhdGEpKSByZXR1cm4gY29uZDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIHNraXBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHdhaXRHbG9iYWxJbml0aWFsaXplZCgnTXZ1Jyk7XG4gIGNvbnNvbGUuaW5mbygnW+adoeS7tuWIhuatp10g57O757uf5Yid5aeL5YyWJyk7XG5cbiAgLy8g55uR5ZCsTVZV5Y+Y6YeP5pu05pawXG4gIGV2ZW50T24oTXZ1LmV2ZW50cy5WQVJJQUJMRV9VUERBVEVfRU5ERUQsIHZhcmlhYmxlcyA9PiB7XG4gICAgY29uc3Qgc3RhdERhdGEgPSBfLmdldCh2YXJpYWJsZXMsICdzdGF0X2RhdGEnKTtcbiAgICBpZiAoIXN0YXREYXRhKSByZXR1cm47XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhzdGF0RGF0YSkpIHtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gc3RhdERhdGFba2V5XTtcbiAgICAgIGlmICghdXNlckRhdGEgfHwgdHlwZW9mIHVzZXJEYXRhICE9PSAnb2JqZWN0JykgY29udGludWU7XG5cbiAgICAgIGlmICh1c2VyRGF0YS5f5bey6Kem5Y+R57uT5bGAIHx8IGVuZGluZ1RyaWdnZXJlZCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHRyaWdnZXJlZCA9IGNoZWNrRGFuZ2VyQ29uZGl0aW9ucyh1c2VyRGF0YSk7XG4gICAgICBpZiAoIXRyaWdnZXJlZCkgY29udGludWU7XG5cbiAgICAgIGNvbnNvbGUuaW5mbyhgW+adoeS7tuWIhuatp10g6Kem5Y+ROiAke3RyaWdnZXJlZC5sYWJlbH1gKTtcbiAgICAgIGVuZGluZ1RyaWdnZXJlZCA9IHRydWU7XG5cbiAgICAgIF8uc2V0KHZhcmlhYmxlcywgYHN0YXRfZGF0YS4ke2tleX0uX+W3suinpuWPkee7k+WxgGAsIHRydWUpO1xuXG4gICAgICBpZiAoZW5kaW5nSW5qZWN0aW9uKSBlbmRpbmdJbmplY3Rpb24udW5pbmplY3QoKTtcbiAgICAgIGVuZGluZ0luamVjdGlvbiA9IGluamVjdFByb21wdHMoW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdlbmRpbmdfdHJpZ2dlcicsXG4gICAgICAgICAgcG9zaXRpb246ICdpbl9jaGF0JyxcbiAgICAgICAgICBkZXB0aDogMSxcbiAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgICBjb250ZW50OiBidWlsZEVuZGluZ1Byb21wdCh0cmlnZ2VyZWQubGFiZWwsIHVzZXJEYXRhKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuXG4gICAgICB0b2FzdHIuZXJyb3IoYCR7dHJpZ2dlcmVkLmxhYmVsfSDigJQgQmFkIEVuZGluZ2AsICfimqDvuI8g57uT5bGA6Kem5Y+RJywgeyB0aW1lT3V0OiA4MDAwLCBjbG9zZUJ1dHRvbjogdHJ1ZSB9KTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8g55uR5ZCs5raI5oGv5a6M5oiQ77yM6Kej5p6QIFvmlLbpm4Y657uT5bGAOl0g5bm25a2Y5YWl6KeS6Imy5Y2h5Y+Y6YePXG4gIGV2ZW50T24odGF2ZXJuX2V2ZW50cy5NRVNTQUdFX1JFQ0VJVkVELCBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFlbmRpbmdUcmlnZ2VyZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKC0xKTtcbiAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbGFzdE1zZyA9IG1lc3NhZ2VzWzBdO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBsYXN0TXNnLm1lc3NhZ2UgfHwgJyc7XG4gICAgY29uc3QgaXRlbSA9IHBhcnNlQ29sbGVjdGlvblRhZyhjb250ZW50KTtcblxuICAgIGlmIChpdGVtKSB7XG4gICAgICBhd2FpdCBzYXZlRW5kaW5nVG9Db2xsZWN0aW9uKGl0ZW0pO1xuXG4gICAgICBpZiAoZW5kaW5nSW5qZWN0aW9uKSB7XG4gICAgICAgIGVuZGluZ0luamVjdGlvbi51bmluamVjdCgpO1xuICAgICAgICBlbmRpbmdJbmplY3Rpb24gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc29sZS5pbmZvKCdb5p2h5Lu25YiG5q2nXSDkuovku7bnm5HlkKzlt7Lorr7nva4nKTtcbn1cblxuLy8gPT09PT09PT09PT09IOWQr+WKqOS4jua4heeQhiA9PT09PT09PT09PT1cblxuJCgoKSA9PiB7XG4gIGVycm9yQ2F0Y2hlZChpbml0KSgpO1xufSk7XG5cbiQod2luZG93KS5vbigncGFnZWhpZGUnLCAoKSA9PiB7XG4gIGlmIChlbmRpbmdJbmplY3Rpb24pIHtcbiAgICBlbmRpbmdJbmplY3Rpb24udW5pbmplY3QoKTtcbiAgICBlbmRpbmdJbmplY3Rpb24gPSBudWxsO1xuICB9XG4gIGNvbnNvbGUuaW5mbygnW+adoeS7tuWIhuatp10g6ISa5pys5Y246L29Jyk7XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/wasteland-echoes-card/脚本/条件分歧判定/index.ts\n\n}");
  }
};

var __webpack_exports__ = {};

__webpack_modules__["./src/wasteland-echoes-card/脚本/条件分歧判定/index.ts"]();