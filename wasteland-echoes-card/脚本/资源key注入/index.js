var __webpack_modules__ = {
  "./src/wasteland-echoes-card/脚本/资源key注入/index.ts"() {
    eval("{\n/**\n * 资源 key 注入脚本\n */\nconst RESOURCE_ENTRY_NAME = '[res]资源库';\nconst INJECT_ID = 'wasteland-echoes-resource-keys';\n/** 顶级分类标题 */\nconst SECTION_HEADERS = ['角色立绘', '背景图', 'CG', 'BGM'];\n/** 将 YAML 内容按顶级分类拆分为 { 分类名: 内容 } */\nfunction splitSections(yamlContent) {\n    const result = {};\n    const headerPattern = new RegExp(`^(${SECTION_HEADERS.join('|')}):\\\\s*$`, 'm');\n    let remaining = yamlContent;\n    while (true) {\n        const match = remaining.match(headerPattern);\n        if (!match)\n            break;\n        const headerName = match[1];\n        const startIdx = match.index + match[0].length;\n        remaining = remaining.substring(startIdx);\n        // 找下一个顶级分类的起始位置\n        const nextMatch = remaining.match(headerPattern);\n        const sectionContent = nextMatch ? remaining.substring(0, nextMatch.index) : remaining;\n        result[headerName] = sectionContent;\n        if (!nextMatch)\n            break;\n        remaining = remaining.substring(nextMatch.index);\n    }\n    return result;\n}\n/** 从 YAML 内容提取 key 列表 */\nfunction buildKeysSummary(yamlContent) {\n    try {\n        if (!yamlContent || typeof yamlContent !== 'string') {\n            console.warn('[资源key注入] YAML内容为空');\n            return null;\n        }\n        const lines = ['[可用资源key]（以下为唯一合法枚举，不得编造、不得自行补充；未列出时只能使用\"暂无\"）'];\n        const sections = splitSections(yamlContent);\n        // 提取角色立绘 — 二级为角色名，三级为表情名\n        if (sections['角色立绘']) {\n            const charBlocks = sections['角色立绘'].split(/\\n(?=[ \\t]{2}\\S)/);\n            const chars = [];\n            for (const block of charBlocks) {\n                const nameMatch = block.match(/^\\s{2}(\\S[^:]*?):\\s*$/m);\n                if (nameMatch) {\n                    const faces = [...block.matchAll(/\\n\\s{4}(\\S[^:]*?):\\s/g)].map(m => m[1].trim());\n                    if (faces.length) {\n                        chars.push(nameMatch[1].trim() + '(' + faces.join(',') + ')');\n                    }\n                }\n            }\n            if (chars.length)\n                lines.push('角色立绘: ' + chars.join(', '));\n        }\n        // 提取背景图 / BGM / CG — 二级为 key 名\n        for (const section of ['背景图', 'BGM', 'CG']) {\n            if (sections[section]) {\n                const keys = [...sections[section].matchAll(/\\n\\s{2}(\\S[^:]*?):\\s/g)].map(m => m[1].trim());\n                if (keys.length)\n                    lines.push(section + ': ' + keys.join(', '));\n            }\n        }\n        console.info('[资源key注入] 解析完成，共' + lines.length + '行');\n        return lines.length > 1 ? lines.join('\\n') : null;\n    }\n    catch (e) {\n        console.error('[资源key注入] 解析失败:', e);\n        return null;\n    }\n}\n/** 查找资源条目 */\nasync function findResourceContent() {\n    const charWorldbooks = getCharWorldbookNames('current');\n    const worldbookNames = [];\n    if (charWorldbooks.primary)\n        worldbookNames.push(charWorldbooks.primary);\n    worldbookNames.push(...charWorldbooks.additional);\n    worldbookNames.push(...getGlobalWorldbookNames());\n    const uniqueNames = [...new Set(worldbookNames)];\n    for (const wbName of uniqueNames) {\n        try {\n            const entries = await getWorldbook(wbName);\n            const entry = entries.find(e => e.name === RESOURCE_ENTRY_NAME || e.name.includes('[res]'));\n            if (entry && entry.content) {\n                console.info('[资源key注入] 找到资源条目：' + entry.name + ' in ' + wbName);\n                return entry.content;\n            }\n        }\n        catch (err) {\n            console.warn('[资源key注入] 读取世界书失败：' + wbName, err);\n        }\n    }\n    return null;\n}\nasync function init() {\n    console.info('[资源key注入] 脚本开始执行...');\n    const content = await findResourceContent();\n    if (!content) {\n        console.warn('[资源key注入] 未找到资源条目');\n        return;\n    }\n    const summary = buildKeysSummary(content);\n    if (!summary) {\n        console.warn('[资源key注入] 解析失败');\n        return;\n    }\n    let currentResult = null;\n    // 注入函数\n    function doInject() {\n        // 先清理旧的注入\n        if (currentResult?.uninject) {\n            currentResult.uninject();\n        }\n        currentResult = injectPrompts([\n            {\n                id: INJECT_ID,\n                position: 'in_chat',\n                depth: 0,\n                role: 'system',\n                should_scan: true,\n                content: summary,\n            },\n            {\n                id: INJECT_ID + '-debug',\n                position: 'in_chat',\n                depth: 0,\n                role: 'assistant',\n                content: '【DEBUG-RESOURCE-KEYS】\\n' + summary,\n            },\n        ]);\n        console.info('[资源key注入] ✅ 注入成功，长度：' + summary.length);\n    }\n    // 初始注入\n    doInject();\n    // 监听生成开始事件，每次生成前重新注入\n    const unsubscribe = eventOn(tavern_events.GENERATION_STARTED, () => {\n        console.info('[资源key注入] 检测到生成开始，重新注入');\n        doInject();\n    });\n    // 卸载时清理\n    $(window).on('pagehide', () => {\n        if (currentResult?.uninject)\n            currentResult.uninject();\n        unsubscribe.stop();\n    });\n}\n$(() => {\n    errorCatched(init)();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2FzdGVsYW5kLWVjaG9lcy1jYXJkL+iEmuacrC/otYTmupBrZXnms6jlhaUvaW5kZXgudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHO0FBRUgsTUFBTSxtQkFBbUIsR0FBRyxVQUFVLENBQUM7QUFDdkMsTUFBTSxTQUFTLEdBQUcsZ0NBQWdDLENBQUM7QUFFbkQsYUFBYTtBQUNiLE1BQU0sZUFBZSxHQUFHLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFVLENBQUM7QUFFOUQsb0NBQW9DO0FBQ3BDLFNBQVMsYUFBYSxDQUFDLFdBQW1CO0lBQ3hDLE1BQU0sTUFBTSxHQUEyQixFQUFFLENBQUM7SUFDMUMsTUFBTSxhQUFhLEdBQUcsSUFBSSxNQUFNLENBQUMsS0FBSyxlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDL0UsSUFBSSxTQUFTLEdBQUcsV0FBVyxDQUFDO0lBRTVCLE9BQU8sSUFBSSxFQUFFLENBQUM7UUFDWixNQUFNLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxLQUFLO1lBQUUsTUFBTTtRQUVsQixNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLEtBQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ2hELFNBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRTFDLGdCQUFnQjtRQUNoQixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sY0FBYyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLEtBQU0sQ0FBQyxDQUFD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QUFDO2dCQUNSLElBQUksRUFBRSxXQUFXO2dCQUNqQixPQUFPLEVBQUUseUJBQXlCLEdBQUcsT0FBUTthQUM5QztTQUNGLENBQUMsQ0FBQztRQUVILE9BQU8sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEdBQUcsT0FBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRCxPQUFPO0lBQ1AsUUFBUSxFQUFFLENBQUM7SUFFWCxxQkFBcUI7SUFDckIsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDakUsT0FBTyxDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQ3ZDLFFBQVEsRUFBRSxDQUFDO0lBQ2IsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRO0lBQ1IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBQzVCLElBQUksYUFBYSxFQUFFLFFBQVE7WUFBRSxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDdEQsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELENBQUMsQ0FBQyxHQUFHLEVBQUU7SUFDTCxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztBQUN2QixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvd2FzdGVsYW5kLWVjaG9lcy1jYXJkL+iEmuacrC/otYTmupBrZXnms6jlhaUvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDotYTmupAga2V5IOazqOWFpeiEmuacrFxuICovXG5cbmNvbnN0IFJFU09VUkNFX0VOVFJZX05BTUUgPSAnW3Jlc13otYTmupDlupMnO1xuY29uc3QgSU5KRUNUX0lEID0gJ3dhc3RlbGFuZC1lY2hvZXMtcmVzb3VyY2Uta2V5cyc7XG5cbi8qKiDpobbnuqfliIbnsbvmoIfpopggKi9cbmNvbnN0IFNFQ1RJT05fSEVBREVSUyA9IFsn6KeS6Imy56uL57uYJywgJ+iDjOaZr+WbvicsICdDRycsICdCR00nXSBhcyBjb25zdDtcblxuLyoqIOWwhiBZQU1MIOWGheWuueaMiemhtue6p+WIhuexu+aLhuWIhuS4uiB7IOWIhuexu+WQjTog5YaF5a65IH0gKi9cbmZ1bmN0aW9uIHNwbGl0U2VjdGlvbnMoeWFtbENvbnRlbnQ6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgY29uc3QgaGVhZGVyUGF0dGVybiA9IG5ldyBSZWdFeHAoYF4oJHtTRUNUSU9OX0hFQURFUlMuam9pbignfCcpfSk6XFxcXHMqJGAsICdtJyk7XG4gIGxldCByZW1haW5pbmcgPSB5YW1sQ29udGVudDtcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IG1hdGNoID0gcmVtYWluaW5nLm1hdGNoKGhlYWRlclBhdHRlcm4pO1xuICAgIGlmICghbWF0Y2gpIGJyZWFrO1xuXG4gICAgY29uc3QgaGVhZGVyTmFtZSA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IHN0YXJ0SWR4ID0gbWF0Y2guaW5kZXghICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoc3RhcnRJZHgpO1xuXG4gICAgLy8g5om+5LiL5LiA5Liq6aG257qn5YiG57G755qE6LW35aeL5L2N572uXG4gICAgY29uc3QgbmV4dE1hdGNoID0gcmVtYWluaW5nLm1hdGNoKGhlYWRlclBhdHRlcm4pO1xuICAgIGNvbnN0IHNlY3Rpb25Db250ZW50ID0gbmV4dE1hdGNoID8gcmVtYWluaW5nLnN1YnN0cmluZygwLCBuZXh0TWF0Y2guaW5kZXghKSA6IHJlbWFpbmluZztcbiAgICByZXN1bHRbaGVhZGVyTmFtZV0gPSBzZWN0aW9uQ29udGVudDtcblxuICAgIGlmICghbmV4dE1hdGNoKSBicmVhaztcbiAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKG5leHRNYXRjaC5pbmRleCEpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqIOS7jiBZQU1MIOWGheWuueaPkOWPliBrZXkg5YiX6KGoICovXG5mdW5jdGlvbiBidWlsZEtleXNTdW1tYXJ5KHlhbWxDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBpZiAoIXlhbWxDb250ZW50IHx8IHR5cGVvZiB5YW1sQ29udGVudCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnNvbGUud2FybignW+i1hOa6kGtleeazqOWFpV0gWUFNTOWGheWuueS4uuepuicpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZXMgPSBbJ1vlj6/nlKjotYTmupBrZXld77yI5Lul5LiL5Li65ZSv5LiA5ZCI5rOV5p6a5Li+77yM5LiN5b6X57yW6YCg44CB5LiN5b6X6Ieq6KGM6KGl5YWF77yb5pyq5YiX5Ye65pe25Y+q6IO95L2/55SoXCLmmoLml6BcIu+8iSddO1xuICAgIGNvbnN0IHNlY3Rpb25zID0gc3BsaXRTZWN0aW9ucyh5YW1sQ29udGVudCk7XG5cbiAgICAvLyDmj5Dlj5bop5LoibLnq4vnu5gg4oCUIOS6jOe6p+S4uuinkuiJsuWQje+8jOS4iee6p+S4uuihqOaDheWQjVxuICAgIGlmIChzZWN0aW9uc1sn6KeS6Imy56uL57uYJ10pIHtcbiAgICAgIGNvbnN0IGNoYXJCbG9ja3MgPSBzZWN0aW9uc1sn6KeS6Imy56uL57uYJ10uc3BsaXQoL1xcbig/PVsgXFx0XXsyfVxcUykvKTtcbiAgICAgIGNvbnN0IGNoYXJzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBibG9jayBvZiBjaGFyQmxvY2tzKSB7XG4gICAgICAgIGNvbnN0IG5hbWVNYXRjaCA9IGJsb2NrLm1hdGNoKC9eXFxzezJ9KFxcU1teOl0qPyk6XFxzKiQvbSk7XG4gICAgICAgIGlmIChuYW1lTWF0Y2gpIHtcbiAgICAgICAgICBjb25zdCBmYWNlcyA9IFsuLi5ibG9jay5tYXRjaEFsbCgvXFxuXFxzezR9KFxcU1teOl0qPyk6XFxzL2cpXS5tYXAobSA9PiBtWzFdLnRyaW0oKSk7XG4gICAgICAgICAgaWYgKGZhY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2hhcnMucHVzaChuYW1lTWF0Y2hbMV0udHJpbSgpICsgJygnICsgZmFjZXMuam9pbignLCcpICsgJyknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFycy5sZW5ndGgpIGxpbmVzLnB1c2goJ+inkuiJsueri+e7mDogJyArIGNoYXJzLmpvaW4oJywgJykpO1xuICAgIH1cblxuICAgIC8vIOaPkOWPluiDjOaZr+WbviAvIEJHTSAvIENHIOKAlCDkuoznuqfkuLoga2V5IOWQjVxuICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBbJ+iDjOaZr+WbvicsICdCR00nLCAnQ0cnXSBhcyBjb25zdCkge1xuICAgICAgaWYgKHNlY3Rpb25zW3NlY3Rpb25dKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbLi4uc2VjdGlvbnNbc2VjdGlvbl0ubWF0Y2hBbGwoL1xcblxcc3syfShcXFNbXjpdKj8pOlxccy9nKV0ubWFwKG0gPT4gbVsxXS50cmltKCkpO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGgpIGxpbmVzLnB1c2goc2VjdGlvbiArICc6ICcgKyBrZXlzLmpvaW4oJywgJykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUuaW5mbygnW+i1hOa6kGtleeazqOWFpV0g6Kej5p6Q5a6M5oiQ77yM5YWxJyArIGxpbmVzLmxlbmd0aCArICfooYwnKTtcbiAgICByZXR1cm4gbGluZXMubGVuZ3RoID4gMSA/IGxpbmVzLmpvaW4oJ1xcbicpIDogbnVsbDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1votYTmupBrZXnms6jlhaVdIOino+aekOWksei0pTonLCBlKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKiog5p+l5om+6LWE5rqQ5p2h55uuICovXG5hc3luYyBmdW5jdGlvbiBmaW5kUmVzb3VyY2VDb250ZW50KCkge1xuICBjb25zdCBjaGFyV29ybGRib29rcyA9IGdldENoYXJXb3JsZGJvb2tOYW1lcygnY3VycmVudCcpO1xuICBjb25zdCB3b3JsZGJvb2tOYW1lcyA9IFtdO1xuXG4gIGlmIChjaGFyV29ybGRib29rcy5wcmltYXJ5KSB3b3JsZGJvb2tOYW1lcy5wdXNoKGNoYXJXb3JsZGJvb2tzLnByaW1hcnkpO1xuICB3b3JsZGJvb2tOYW1lcy5wdXNoKC4uLmNoYXJXb3JsZGJvb2tzLmFkZGl0aW9uYWwpO1xuICB3b3JsZGJvb2tOYW1lcy5wdXNoKC4uLmdldEdsb2JhbFdvcmxkYm9va05hbWVzKCkpO1xuXG4gIGNvbnN0IHVuaXF1ZU5hbWVzID0gWy4uLm5ldyBTZXQod29ybGRib29rTmFtZXMpXTtcblxuICBmb3IgKGNvbnN0IHdiTmFtZSBvZiB1bmlxdWVOYW1lcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgZ2V0V29ybGRib29rKHdiTmFtZSk7XG4gICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXMuZmluZChlID0+IGUubmFtZSA9PT0gUkVTT1VSQ0VfRU5UUllfTkFNRSB8fCBlLm5hbWUuaW5jbHVkZXMoJ1tyZXNdJykpO1xuICAgICAgaWYgKGVudHJ5ICYmIGVudHJ5LmNvbnRlbnQpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKCdb6LWE5rqQa2V55rOo5YWlXSDmib7liLDotYTmupDmnaHnm67vvJonICsgZW50cnkubmFtZSArICcgaW4gJyArIHdiTmFtZSk7XG4gICAgICAgIHJldHVybiBlbnRyeS5jb250ZW50O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCdb6LWE5rqQa2V55rOo5YWlXSDor7vlj5bkuJbnlYzkuablpLHotKXvvJonICsgd2JOYW1lLCBlcnIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHtcbiAgY29uc29sZS5pbmZvKCdb6LWE5rqQa2V55rOo5YWlXSDohJrmnKzlvIDlp4vmiafooYwuLi4nKTtcblxuICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmluZFJlc291cmNlQ29udGVudCgpO1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICBjb25zb2xlLndhcm4oJ1votYTmupBrZXnms6jlhaVdIOacquaJvuWIsOi1hOa6kOadoeebricpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHN1bW1hcnkgPSBidWlsZEtleXNTdW1tYXJ5KGNvbnRlbnQpO1xuICBpZiAoIXN1bW1hcnkpIHtcbiAgICBjb25zb2xlLndhcm4oJ1votYTmupBrZXnms6jlhaVdIOino+aekOWksei0pScpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBjdXJyZW50UmVzdWx0OiBSZXR1cm5UeXBlPHR5cGVvZiBpbmplY3RQcm9tcHRzPiB8IG51bGwgPSBudWxsO1xuXG4gIC8vIOazqOWFpeWHveaVsFxuICBmdW5jdGlvbiBkb0luamVjdCgpIHtcbiAgICAvLyDlhYjmuIXnkIbml6fnmoTms6jlhaVcbiAgICBpZiAoY3VycmVudFJlc3VsdD8udW5pbmplY3QpIHtcbiAgICAgIGN1cnJlbnRSZXN1bHQudW5pbmplY3QoKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVzdWx0ID0gaW5qZWN0UHJvbXB0cyhbXG4gICAgICB7XG4gICAgICAgIGlkOiBJTkpFQ1RfSUQsXG4gICAgICAgIHBvc2l0aW9uOiAnaW5fY2hhdCcsXG4gICAgICAgIGRlcHRoOiAwLFxuICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgc2hvdWxkX3NjYW46IHRydWUsXG4gICAgICAgIGNvbnRlbnQ6IHN1bW1hcnkhLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IElOSkVDVF9JRCArICctZGVidWcnLFxuICAgICAgICBwb3NpdGlvbjogJ2luX2NoYXQnLFxuICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6ICfjgJBERUJVRy1SRVNPVVJDRS1LRVlT44CRXFxuJyArIHN1bW1hcnkhLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGNvbnNvbGUuaW5mbygnW+i1hOa6kGtleeazqOWFpV0g4pyFIOazqOWFpeaIkOWKn++8jOmVv+W6pu+8micgKyBzdW1tYXJ5IS5sZW5ndGgpO1xuICB9XG5cbiAgLy8g5Yid5aeL5rOo5YWlXG4gIGRvSW5qZWN0KCk7XG5cbiAgLy8g55uR5ZCs55Sf5oiQ5byA5aeL5LqL5Lu277yM5q+P5qyh55Sf5oiQ5YmN6YeN5paw5rOo5YWlXG4gIGNvbnN0IHVuc3Vic2NyaWJlID0gZXZlbnRPbih0YXZlcm5fZXZlbnRzLkdFTkVSQVRJT05fU1RBUlRFRCwgKCkgPT4ge1xuICAgIGNvbnNvbGUuaW5mbygnW+i1hOa6kGtleeazqOWFpV0g5qOA5rWL5Yiw55Sf5oiQ5byA5aeL77yM6YeN5paw5rOo5YWlJyk7XG4gICAgZG9JbmplY3QoKTtcbiAgfSk7XG5cbiAgLy8g5Y246L295pe25riF55CGXG4gICQod2luZG93KS5vbigncGFnZWhpZGUnLCAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRSZXN1bHQ/LnVuaW5qZWN0KSBjdXJyZW50UmVzdWx0LnVuaW5qZWN0KCk7XG4gICAgdW5zdWJzY3JpYmUuc3RvcCgpO1xuICB9KTtcbn1cblxuJCgoKSA9PiB7XG4gIGVycm9yQ2F0Y2hlZChpbml0KSgpO1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/wasteland-echoes-card/脚本/资源key注入/index.ts\n\n}");
  }
};

var __webpack_exports__ = {};

__webpack_modules__["./src/wasteland-echoes-card/脚本/资源key注入/index.ts"]();